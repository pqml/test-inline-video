var e,t=window,n=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,i=t.performance||Date,o=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),a=!!navigator.connection&&navigator.connection.saveData;void 0!==document.hidden?e={name:"visibilitychange",key:"hidden"}:void 0!==document.msHidden?e={name:"msvisibilitychange",key:"msHidden"}:void 0!==document.webkitHidden&&(e={name:"webkitvisibilitychange",key:"webkitHidden"});export default function(t){return void 0===t&&(t={}),new Promise(function(r,d){var s,u,m,c=0,l=[],p=0,v={autoplay:!0,saveData:a,iOS:o,badFps:!1,error:null};function h(){m=!0}s=document.createElement("video"),document.body.appendChild(s),s.setAttribute("muted",""),s.setAttribute("playsinline",""),s.setAttribute("webkit-playsinline",""),s.setAttribute("width","1px"),s.setAttribute("height","1px"),s.muted=!0,s.playsinline=!0,s.webkitPlaysinline=!0,s.style.cssText="z-index:10000;position:fixed;top:50%;left:50%;width:1px;height:1px;opacity:0.01;pointer-events:none;user-select:none",new Promise(function(e){return e(s.play())}).catch(function(){}),s.paused&&(v.autoplay=!1,v.error=new Error("No support for inline video")),p=i.now(),t.testFramerate?n(function t(){if(u=i.now(),m)return m=!1,p=u,void n(t);l.push(u-p),p=u,++c<12?n(t):(e&&document.removeEventListener(e.name,h,!1),1e3/function(e){void 0===e&&(e=[]);var t=e.slice(0).sort(function(e,t){return e-t}),n=Math.floor(t.length/2);return t.length%2==0?(t[n]+t[n-1])/2:t[n]}(l)<45&&(v.badFps=!0),r(v))}):r(v)})};
